<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Routine Planner</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- PyScript -->
<link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css">
<script defer src="https://pyscript.net/latest/pyscript.js"></script>

<style>
body{
  background: linear-gradient(135deg,#6a11cb,#2575fc);
  color:white;
  font-family:Arial;
  overflow:hidden;
}
.slide{
  width:100vw;
  height:100vh;
  display:none;
  justify-content:center;
  align-items:center;
}
.slide.active{display:flex;}
.card{
  width:90%;
  max-width:700px;
  border-radius:20px;
  padding:20px;
}
.timeline-item{
  display:flex;
  margin-bottom:15px;
}
.time{
  width:90px;
  font-weight:bold;
}
.task{
  flex:1;
  background:white;
  color:black;
  padding:12px;
  border-radius:15px;
}
.morning{border-left:6px solid orange;}
.work{border-left:6px solid green;}
.break{border-left:6px solid brown;}
.evening{border-left:6px solid blue;}
.night{border-left:6px solid purple;}
</style>
</head>

<body>

<!-- SLIDE 1 -->
<div class="slide active">
  <div class="card text-center">
    <h1>ğŸ Routine Planner</h1>
    <p>Plan your day. Improve your life.</p>
    <button class="btn btn-primary" onclick="next()">Get Started ğŸš€</button>
  </div>
</div>

<!-- SLIDE 2 -->
<div class="slide">
  <div class="card">
    <h3>ğŸ‘¤ Your Details</h3>
    <input id="name" class="form-control" placeholder="Your Name">
    <select id="role" class="form-control mt-2">
      <option>Student ğŸ“</option>
      <option>Employee ğŸ’¼</option>
      <option>Freelancer ğŸ§‘â€ğŸ’»</option>
    </select>
    <button class="btn btn-success mt-3" onclick="saveUser()">Next â¡ï¸</button>
  </div>
</div>

<!-- SLIDE 3 -->
<div class="slide">
  <div class="card">
    <h3>â° Routine</h3>
    <label>Wake Time</label>
    <input id="wake" type="time" class="form-control">
    <label class="mt-2">Sleep Time</label>
    <input id="sleep" type="time" class="form-control">
    <button class="btn btn-success mt-3" onclick="saveTime()">Next â¡ï¸</button>
  </div>
</div>

<!-- SLIDE 4 -->
<div class="slide">
  <div class="card">
    <h3>ğŸ¯ Goal</h3>
    <input id="goal" class="form-control" placeholder="Your main goal">
    <button class="btn btn-warning mt-3" onclick="generate()">Generate Plan ğŸ§ </button>
  </div>
</div>

<!-- FINAL SLIDE -->
<div class="slide">
  <div class="card">
    <h4 id="greet"></h4>
    <p id="date"></p>
    <div id="output"></div>
  </div>
</div>

<!-- PYTHON LOGIC -->
<py-script>
from datetime import date

def create_plan(name, role):
    student = "Student" in role
    tasks = [
        ("7:00 AM","ğŸŒ… Wake Up","morning"),
        ("8:00 AM","ğŸ³ Breakfast","break"),
        ("9:00 AM","ğŸ“š Study / Work","work"),
        ("11:00 AM","â˜• Break","break")
    ]
    if student:
        tasks.append(("1:00 PM","ğŸ“ Exam Revision","work"))
    tasks += [
        ("5:00 PM","ğŸ’ª Fitness","evening"),
        ("7:00 PM","ğŸ½ï¸ Dinner","break"),
        ("9:00 PM","ğŸ“– Relax","evening"),
        ("10:30 PM","ğŸŒ™ Sleep","night")
    ]

    html=""
    for t,task,cls in tasks:
        html+=f"""
        <div class='timeline-item'>
          <div class='time'>{t}</div>
          <div class='task {cls}'>{task}</div>
        </div>
        """
    return html

def today():
    return date.today().strftime("%d %B %Y")
</py-script>

<script>
let slides=document.querySelectorAll(".slide");
let i=0;
function next(){slides[i].classList.remove("active");i++;slides[i].classList.add("active");}

function saveUser(){
 localStorage.name=name.value;
 localStorage.role=role.value;
 next();
}
function saveTime(){next();}

function generate(){
 let plan=pyscript.interpreter.globals.get("create_plan")(localStorage.name,localStorage.role);
 output.innerHTML=plan;
 greet.innerText="Good Day, "+localStorage.name+" ğŸ‘‹";
 date.innerText=pyscript.interpreter.globals.get("today")();
 next();
}
</script>

</body>
</html>
